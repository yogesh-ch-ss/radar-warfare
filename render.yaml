services:
    - type: web
      name: redis
      env: docker
      image: redis:latest
      plan: free
      autoDeploy: false
      ports:
          - 6379

    - type: web
      name: matchmaking-service
      env: docker
      dockerfilePath: ./matchmaking-service/Dockerfile
      plan: free
      autoDeploy: true
      envVars:
          - key: REDIS_HOST
            value: redis
      ports:
          - 8081

    - type: web
      name: gameplay-service
      env: docker
      dockerfilePath: ./gameplay-service/Dockerfile
      plan: free
      autoDeploy: true
      envVars:
          - key: REDIS_HOST
            value: redis
      ports:
          - 8082

    - type: web
      name: frontend
      env: docker
      dockerfilePath: ./frontend/Dockerfile
      plan: free
      autoDeploy: true
      ports:
          - 3000
